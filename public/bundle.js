!function(){"use strict";function t(){}const e=t=>t;function s(t,e){for(const s in e)t[s]=e[s];return t}function n(t){return t()}function a(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,s){const n=e.subscribe(s);t.$$.on_destroy.push(n.unsubscribe?()=>n.unsubscribe():n)}let c="undefined"!=typeof window?()=>window.performance.now():()=>Date.now(),d=t=>requestAnimationFrame(t);const h=new Set;let u,g=!1;function f(){h.forEach(t=>{t[0](c())||(h.delete(t),t[1]())}),(g=h.size>0)&&d(f)}function m(t,e){t.appendChild(e)}function p(t,e,s){t.insertBefore(e,s||null)}function b(t){t.parentNode.removeChild(t)}function v(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function $(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function y(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function k(){return w("")}function _(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function A(t,e,s){null==s?t.removeAttribute(e):t.setAttribute(e,s)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function P(t,e,s){t.style.setProperty(e,s)}function O(t,e){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e)return void(n.selected=!0)}}function T(t){u=t}const S=[],L=[],C=[],N=[],j=Promise.resolve();let D=!1;function E(t){C.push(t)}function H(){const t=new Set;do{for(;S.length;){const t=S.shift();T(t),W(t.$$)}for(;L.length;)L.pop()();for(let e=0;e<C.length;e+=1){const s=C[e];t.has(s)||(s(),t.add(s))}C.length=0}while(S.length);for(;N.length;)N.pop()();D=!1}function W(t){t.fragment&&(t.update(t.dirty),r(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(E))}const F=new Set;let R;function U(){R={r:0,c:[],p:R}}function q(){R.r||r(R.c),R=R.p}function B(t,e){t&&t.i&&(F.delete(t),t.i(e))}function I(t,e,s,n){if(t&&t.o){if(F.has(t))return;F.add(t),R.c.push(()=>{F.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}}const z="undefined"!=typeof window?window:global;function K(t,e){const s={},n={},a={$$scope:1};let r=t.length;for(;r--;){const i=t[r],o=e[r];if(o){for(const t in i)t in o||(n[t]=1);for(const t in o)a[t]||(s[t]=o[t],a[t]=1);t[r]=o}else for(const t in i)a[t]=1}for(const t in n)t in s||(s[t]=void 0);return s}function J(t,e,s){const{fragment:a,on_mount:o,on_destroy:l,after_update:c}=t.$$;a.m(e,s),E(()=>{const e=o.map(n).filter(i);l?l.push(...e):r(e),t.$$.on_mount=[]}),c.forEach(E)}function Y(t,e){t.$$.fragment&&(r(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function G(t,e){t.$$.dirty||(S.push(t),D||(D=!0,j.then(H)),t.$$.dirty=a()),t.$$.dirty[e]=!0}function Q(e,s,n,i,o,l){const c=u;T(e);const d=s.props||{},h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:o,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:a(),dirty:null};let g=!1;var f;h.ctx=n?n(e,d,(t,s)=>{h.ctx&&o(h.ctx[t],h.ctx[t]=s)&&(h.bound[t]&&h.bound[t](s),g&&G(e,t))}):d,h.update(),g=!0,r(h.before_update),h.fragment=i(h.ctx),s.target&&(s.hydrate?h.fragment.l((f=s.target,Array.from(f.childNodes))):h.fragment.c(),s.intro&&B(e.$$.fragment),J(e,s.target,s.anchor),H()),T(c)}class X{$destroy(){Y(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(){}}function V(e,s=t){let n;const a=[];function r(t){if(o(e,t)){if(e=t,!n)return;a.forEach(t=>t[1]()),a.forEach(t=>t[0](e))}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,o=t){const l=[i,o];return a.push(l),1===a.length&&(n=s(r)||t),i(e),()=>{const t=a.indexOf(l);-1!==t&&a.splice(t,1),0===a.length&&(n(),n=null)}}}}function Z(t){return"[object Date]"===Object.prototype.toString.call(t)}function tt(t,e){if(t===e||t!=t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const s=e.map((e,s)=>tt(t[s],e));return t=>s.map(e=>e(t))}if("object"===s){if(!t||!e)throw new Error("Object cannot be null");if(Z(t)&&Z(e)){t=t.getTime();const s=(e=e.getTime())-t;return e=>new Date(t+e*s)}const s=Object.keys(e),n={};return s.forEach(s=>{n[s]=tt(t[s],e[s])}),t=>{const e={};return s.forEach(s=>{e[s]=n[s](t)}),e}}if("number"===s){const s=e-t;return e=>t+e*s}throw new Error(`Cannot interpolate ${s} values`)}function et(t,n={}){const a=V(t);let r,i=t;function o(o,l){i=o;let u=r,m=!1,{delay:p=0,duration:b=400,easing:v=e,interpolate:$=tt}=s(s({},n),l);const y=c()+p;let w;return(r=function(t){let e;return g||(g=!0,d(f)),{promise:new Promise(s=>{h.add(e=[t,s])}),abort(){h.delete(e)}}}(e=>{if(e<y)return!0;m||(w=$(t,o),"function"==typeof b&&(b=b(t,o)),m=!0),u&&(u.abort(),u=null);const s=e-y;return s>b?(a.set(t=o),!1):(a.set(t=w(v(s/b))),!0)})).promise}return{set:o,update:(e,s)=>o(e(i,t),s),subscribe:a.subscribe}}let st={duration:200,easing:t=>t};const nt=V({}),at=V({}),rt=V([]),it=V(null);let ot,lt=V({}),ct=V({}),dt=navigator.userAgent.search("Chrome")>=0,ht=V([]),ut=V({});function gt(t){ht.update(e=>e.slice(-5).concat([t])),console.log(t)}function ft(t){ot?ot.set(t):(ot=dt?et(t,st):V(t),lt.set(ot))}const mt=V(!0);let pt;mt.set("no"!=localStorage.what),mt.subscribe(t=>localStorage.setItem("what",t?"yes":"no")),ut.set(localStorage.helpSeen?JSON.parse(localStorage.helpSeen):{}),ut.subscribe(t=>localStorage.setItem("helpSeen",JSON.stringify(t))),ct.set(localStorage.settings?JSON.parse(localStorage.settings):{sound:!0,abridgedAnalysis:!1}),ct.subscribe(t=>localStorage.setItem("settings",JSON.stringify(t))),it.subscribe(t=>{pt&&pt!=t&&location.reload(),pt=t});const bt=V([]);let vt="game ",$t=vt.length;function yt(){let t=[];for(let e in localStorage)if("auto"==e||e.substr(0,$t)==vt){let s=JSON.parse(localStorage[e]),n=(Number(e.substr($t)),"?");try{n=`${s.conf.mode} t${s.turns.length} ${s.conf.width}x${s.conf.height} #${s.conf.seed} ${s.date.toLocaleString()}`}catch(t){console.error(t)}"auto"==e?t.unshift([e,n]):t.push([e,n])}t.push([wt(),"#NEW"]),bt.set(t)}function wt(){let t=0;for(let e in localStorage)if(e.substr(0,$t)==vt){let s=Number(e.substr($t));s>=t&&(t=s+1)}return vt+t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var xt,kt=(function(t,e){t.exports=function(){var t=624,e=397,s=function(e){void 0===e&&(e=(new Date).getTime()),this.mt=new Array(t),this.mti=625,this.seed(e)};s.prototype.seed=function(e){var s;for(this.mt[0]=e>>>0,this.mti=1;this.mti<t;this.mti++)s=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&s)>>>16)<<16)+1812433253*(65535&s)+this.mti,this.mt[this.mti]>>>=0},s.prototype.seedArray=function(e){var s,n=1,a=0,r=t>e.length?t:e.length;for(this.seed(19650218);r>0;r--)s=this.mt[n-1]^this.mt[n-1]>>>30,this.mt[n]=(this.mt[n]^(1664525*((4294901760&s)>>>16)<<16)+1664525*(65535&s))+e[a]+a,this.mt[n]>>>=0,a++,++n>=t&&(this.mt[0]=this.mt[623],n=1),a>=e.length&&(a=0);for(r=623;r;r--)s=this.mt[n-1]^this.mt[n-1]>>>30,this.mt[n]=(this.mt[n]^(1566083941*((4294901760&s)>>>16)<<16)+1566083941*(65535&s))-n,this.mt[n]>>>=0,++n>=t&&(this.mt[0]=this.mt[623],n=1);this.mt[0]=2147483648},s.prototype.int=function(){var s,n,a=new Array(0,2567483615);if(this.mti>=t){for(625===this.mti&&this.seed(5489),n=0;n<227;n++)s=2147483648&this.mt[n]|2147483647&this.mt[n+1],this.mt[n]=this.mt[n+e]^s>>>1^a[1&s];for(;n<623;n++)s=2147483648&this.mt[n]|2147483647&this.mt[n+1],this.mt[n]=this.mt[n+(e-t)]^s>>>1^a[1&s];s=2147483648&this.mt[623]|2147483647&this.mt[0],this.mt[623]=this.mt[396]^s>>>1^a[1&s],this.mti=0}return s=this.mt[this.mti++],s^=s>>>11,s^=s<<7&2636928640,s^=s<<15&4022730752,(s^=s>>>18)>>>0},s.prototype.int31=function(){return this.int()>>>1},s.prototype.real=function(){return this.int()*(1/4294967295)},s.prototype.realx=function(){return(this.int()+.5)*(1/4294967296)},s.prototype.rnd=function(){return this.int()*(1/4294967296)},s.prototype.random=s.prototype.rnd,s.prototype.rndHiRes=function(){var t=this.int()>>>5,e=this.int()>>>6;return(67108864*t+e)*(1/9007199254740992)};var n=new s;return s.random=function(){return n.rnd()},s}()}(xt={exports:{}},xt.exports),xt.exports);class _t{constructor(t,e,s){this.game=t,this.kind=e,this.id=s,this.cells=[],this.neighbors=[],this.resolved=!1,this.reached=!1}addNeighbor(t){t&&!this.neighbors.includes(t)&&(this.neighbors.push(t),t.neighbors.push(this))}reach(){this.reached||(this.reached=!0,"none"==this.kind&&this.resolve(),this.updateAnalysis())}resolve(){if(!this.resolved){this.resolved=!0;for(let t of this.neighbors)t.reach();this.none||this.loot()}}get possible(){return 1==this.possibility}get possibility(){return 0}loot(){}get lootRatio(){return.1}get score(){return this.cells.length*(this.dream?this.scorePerDream:1)}get scorePerDream(){return 100}get scorePerTurn(){return 3}get xp(){return null}get wasted(){return!this.resolved&&this.game.wasted(this.last)}get dream(){return"dream"==this.kind}get none(){return"none"==this.kind}get color(){return this.game.colors(this.kind)}reset(){this.reached=!1,this.resolved=!1}updateAnalysis(){}get deathText(){if("dream"==this.kind)return{class:"dream",text:this.scorePerDream};let t=this.xp;return t&&t.length>=2?{class:t[0],text:t[1]}:void 0}}class At{constructor(t,e){this.twister=new kt,this.board=[],this.figs=[],this.turns=[],this.persist=null,e&&(this.persist=e),this.config(t),it.set(this)}colors(t){return t}start(){this.generate(),this.play(),this.saveAuto()}config(t){return this.conf=t,this}load(t){try{if("string"==typeof t){let e=At.loadRaw(t);return!!e&&(this.deserialize(e),!0)}this.deserialize(t)}catch(t){console.log("corrupted save"),this.wipeAuto(),location.reload()}}static loadRaw(t){if(!t)return null;let e=localStorage.getItem(t);return e&&"undefined"!=e?JSON.parse(e):null}save(t){return t||(t=wt()),localStorage.setItem(t,JSON.stringify(this.serialized())),t}erase(t){localStorage.removeItem(t)}get savedFields(){return"conf turns".split(" ")}serialized(){let t={date:new Date};for(let e of this.savedFields)t[e]=this[e];return t}get cellsNumber(){return this.width*this.height}get width(){return this.conf.width}get height(){return this.conf.height}deserialize(t){for(let e in t)this[e]=t[e];this.generate(),this.play(t.turns)}get dreamFrequency(){return 400}cellGenerator(t){return 0}get colorsList(){return["none"]}generate(){this.turns=[],this.figs=[],this.twister.seed(this.conf.seed),this.rni=this.twister.int.bind(this.twister),this.deltas=[-1,1,-this.width,+this.width];let t=[...Array(this.cellsNumber)].map((t,e)=>this.cellGenerator(e));for(let e=0;e<this.cellsNumber;e+=Math.floor(this.dreamFrequency/2)+this.rni()%this.dreamFrequency)0!=e&&(t[e]=1);this.board=t.map(t=>null);for(let e in t)this.populate(t,Number(e))}createFig(t,e){return new _t(this,t,e)}populate(t,e){if(this.board[e])return;let s=t[e],n=this.colorsList[s],a=[e],r=this.createFig(n,this.figs.length);for(this.figs.push(r);a.length>0;){let e=a.pop();this.board[e]=r,r.cells.push(e);for(let n of this.deltas){let i=e+n;1==Math.abs(n)&&Math.floor(e/this.width)!=Math.floor(i/this.width)||(this.board[i]?r.addNeighbor(this.board[i]):t[i]==s&&a.push(i))}}r.last=r.cells.reduce((t,e)=>t>e?t:e);let i=r.cells.map(t=>this.row(t));r.depth=Math.round(i.reduce((t,e)=>t+e)/r.cells.length)}row(t){return Math.floor(t/this.width)}init(){}play(t=[]){this.init(),this.turns=t,this.score=0,this.dreamsTotal=0,this.haveMoves=!0;for(let t of this.figs)t.reset(),t.dream&&this.dreamsTotal++;for(let t=0;t<this.width;t++)this.board[t].reach();for(let e of t)this.figs[e]&&this.figs[e].resolve();this.saveAuto(),this.stateChanged()}attackFigAt(t){let e=this.board[t];return e?e.wasted?null:e&&e.possible?(e.resolve(),this.turns.push(e.id),this.stateChanged(),this.saveAuto(),e):null:null}saveAuto(){this.save(this.persist)}wipeAuto(){localStorage.removeItem(this.persist)}updateResolutions(){this.haveMoves=!1;for(let t of this.figs)t.reached&&!t.resolved&&(t.possible&&(this.haveMoves=!0),t.updateAnalysis())}undo(){this.turns.length>0&&this.play(this.turns.slice(0,-1))}reset(){this.play()}logFigAt(t){let e=this.board[t];e.updateAnalysis(),console.log(e)}fig(t){return this.figs[t]}figAt(t){return this.board[t]}stateExtraFields(){return{}}stateChanged(){this.updateResolutions(),this.dreamsResolved=0,this.dreamsWasted=0;for(let t of this.figs)t.dream&&(t.resolved?this.dreamsResolved++:t.wasted&&this.dreamsWasted++);nt.set(this.conf),rt.set(this.board),this.complete=this.dreamsResolved+this.dreamsWasted==this.dreamsTotal||!this.haveMoves;let t={turns:this.turns.length,score:this.score,wasteDepth:this.wasteDepth,turnsToWaste:this.turnsToWaste,complete:this.complete?1:0,haveMoves:this.haveMoves?1:0};Object.assign(t,this.stateExtraFields()),ft(t),at.set(this.debrief)}get wasteDepth(){return Math.max(0,Math.floor((this.turns.length-this.wastedDelay)/this.turnsPerWastedLine))}get turnsToWaste(){let t=this.turns.length-this.wastedDelay;return t<0?-t:this.turnsPerWastedLine-t%this.turnsPerWastedLine}wasted(t){return t<this.width*this.wasteDepth}get turnsPerWastedLine(){return 3}get wastedDelay(){return 20}get debrief(){let t={score:this.score,dreamsResolved:this.dreamsResolved,dreamsWasted:this.dreamsWasted,turns:this.turns.length,challengeUrl:this.challengeUrl};for(let e of this.figs)e.resolved&&(t[e.kind]=(t[e.kind]||0)+e.cells.length);return t}get challengeUrl(){let t={};Object.assign(t,this.conf),t.goal=this.score;let e=new URLSearchParams(t);return window.location.host+window.location.pathname+"#"+e.toString()}colorAt(t){return this.figAt(t).color}get statsOrder(){return[]}get mode(){return this.conf.mode}}!function(t){t.Config=class{}}(At||(At={}));var Mt=At;const Pt=20;class Ot{constructor(t){this.bats=t,this.time=0,this.log=[],this.hp=[];for(let e of t)e.hp=e.vit,e.nextAttack=e.interval();t[0].seed(t[1]),t[1].seed(t[0]);let e=30;for(;!this.over()&&e-- >0;){let e=Math.min(...t.map(t=>t.nextAttack));this.time=e;for(let e of t)if(e.nextAttack<=this.time&&!(e.hp<=0)){let s=t[0]==e?t[1]:t[0];this.log.push(e.attack(s,this))}}this.hp=this.bats.map(t=>t.hp),t[0].hp<=0?this.outcome="lose":t[1].hp<=0?this.outcome="win":this.outcome="draw","win"==this.outcome?this.success=1:this.success=Math.max(.1,Math.min(1-t[1].hp/t[1].vit,.9))}get enemy(){return this.bats[1]}over(){return this.log.length>=Pt||!this.bats.every(t=>t.hp>0)}}class Tt{constructor(t){this.fig=t,this.twister=new kt}stats(t){return Object.assign(this,t),this}interval(){return 1e4/this.spd}rni(){return this.twister.int()}seed(t){let e=100+2*Math.abs(t.fig?t.fig.id:-1)+(this.fig?this.fig.id:-1);this.twister.seed(e)}get isProto(){return!this.fig}update(){let t={};for(let e in Tt.statsBase)t[e]=0;t[this.fig.kind]=4*this.fig.cells.length;for(let e of this.fig.neighbors)e.resolved||(t[e.kind]+=e.cells.length);for(let e in Tt.statsBase)this[e]=Math.floor(Tt.statsBase[e]*(10+2*t[e])*Math.pow(10,1+this.fig.depth/20)/100);return this.battle=new Ot([this.fig.monstromino.prota,this]),this}attack(t,e){this.nextAttack=e.time+this.interval();let s=0,n=this.rni(),a=Math.floor((n%1e6/1e6+.5)*this.str);return(s=Math.max(0,a-t.def))>0&&(t.hp-=s),{a:this,d:t,damage:s,damageRoll:a,def:t.def,hp:t.hp}}}function St(t,e){let s=e()%t.reduce((t,e)=>t+e)-t[0],n=0;for(;s>=0;)s-=t[++n];return n}Tt.statsBase={str:10,vit:30,def:10,spd:10,dream:0};let Lt=" K M B t q Q s S o n d U D T Qt Qd Sd St O N v c".split(" ");function Ct(t){if(isNaN(+t))return t;let e;for(e=0;Math.abs(t)>1e5&&e<Lt.length;e++)t/=1e3;return Math.round(t)+Lt[e]}function Nt(t,...e){return t.replace(/{(\d+)}/g,function(t,s){return void 0!==e[s]?e[s]:t})}class jt extends _t{get battler(){return this.battle?this.battle.enemy:null}get monstromino(){return this.game}loot(){this.game.score+=this.score-this.scorePerTurn;let t=this.kind;"none"!=t&&(this.monstromino.prota[t]+=Math.floor(this.battle.enemy[t]*this.lootRatio))}get xp(){if("dream"==this.kind)return null;let t=this.kind;return[t,Math.floor(this.battle.enemy[t]/10)]}updateAnalysis(){if(this.resolved||"none"==this.kind)return this.battle=null,this;let t={str:0,vit:0,def:0,spd:0,dream:0};t[this.kind]=4*this.cells.length;for(let e of this.neighbors)e.resolved||(t[e.kind]+=2*e.cells.length);let e=new Tt(this);for(let e of this.game.statsOrder)t[e]+=2*t.dream;t.dream=0;for(let s in Tt.statsBase)e[s]=Math.floor(Tt.statsBase[s]*(5+t[s])*Math.pow(10,1+.05*this.depth)*.015);return this.battle=new Ot([this.monstromino.prota,e]),this}reset(){super.reset(),this.battle=null}get possibility(){return!this.reached||this.resolved||this.wasted?0:this.battle?this.battle.success:0}}const Dt={str:"red",vit:"green",def:"yellow",spd:"blue",none:"none",dream:"dream"};class Et extends Mt{get statsOrder(){return["str","vit","def","spd"]}get colorsList(){return["none","dream","str","vit","def","spd"]}colors(t){return Dt[t]}createFig(t,e){return new jt(this,t,e)}cellGenerator(t){return St([1,0,1,1,1,1],this.rni)}init(){this.prota=(new Tt).stats({str:40,vit:40,def:40,spd:40})}stateExtraFields(){return{str:this.prota.str,vit:this.prota.vit,def:this.prota.def,spd:this.prota.spd}}get dreamFrequency(){return 400}}class Ht extends _t{loot(){let t=this.rainbow.colorsList.indexOf(this.kind);t>1&&(t+=1)>=this.rainbow.colorsList.length&&(t=2),this.rainbow.color=t,this.game.score+=this.score-3}get rainbow(){return this.game}get possibility(){return this.reached&&!this.resolved&&(this.rainbow.color<=1||"dream"==this.kind||this.rainbow.colorsList.indexOf(this.kind)==this.rainbow.color)?1:0}}class Wt extends Mt{get statsOrder(){return[]}get colorsList(){return["none","dream","red","yellow","green","blue","violet"]}createFig(t,e){return new Ht(this,t,e)}cellGenerator(t){return St([1,0,1,1,1,1,1],this.rni)}init(){this.color=0}get dreamFrequency(){return 400}get turnsPerWastedLine(){return 2}get wastedDelay(){return 10}}class Ft{power(t){return(Object.values(this).reduce((t,e)=>t+e)+(t?2*this[t]:0))/3}}const Rt={self:10,friends:10,family:10,career:10};class Ut extends _t{reset(){super.reset(),this.stats=new Ft}loot(){this.game.score+=this.score-this.scorePerTurn,this.kind in this.stats&&(this.life.prota[this.kind]+=Math.floor(this.stats[this.kind]*this.lootRatio))}get lootRatio(){return.07}get scorePerDream(){return 100}get life(){return this.game}get possibility(){if(!this.reached||this.resolved||this.wasted)return 0;this.stats||this.updateAnalysis();let t=0;if(this.dream){t=Object.keys(this.stats).map(t=>this.life.prota[t]/this.stats[t]).reduce((t,e)=>t<e?t:e)}else{let e=this.stats[this.kind];t=this.life.prota.power(this.kind)/e}return t>=1?1:t}get outcome(){return this.possible?"possible":"impossible"}updateAnalysis(){if(this.resolved||"none"==this.kind)return this;let t={self:0,friends:0,family:0,career:0,dream:0};t[this.kind]=4*this.cells.length;for(let e of this.neighbors)e.resolved||(t[e.kind]+=2*e.cells.length*(this.dream||e.dream?2:1));for(let e of this.life.statsOrder)t[e]+=4*t.dream;t.dream=0;let e=this.dream?Object.keys(Rt):[this.kind];for(let s of e)this.stats[s]=Math.floor(Rt[s]*(5+t[s])*Math.pow(10,1+.03*this.depth)*.015)}get xp(){return"dream"==this.kind?null:[this.kind,Math.floor(this.stats[this.kind]*this.lootRatio)]}get color(){if(this.dream){this.updateAnalysis();let t=Object.keys(this.stats).reduce(([t,e],s)=>{let n=this.life.prota[s]/this.stats[s];return n<t?[n,s]:[t,e]},[1,0]);return t[0]>=1?this.game.colors("none"):this.game.colors(t[1])}return this.game.colors(this.kind)}}const qt={self:"red",friends:"yellow",family:"green",career:"blue",none:"none",dream:"dream"};class Bt extends Mt{get statsOrder(){return["self","friends","family","career"]}get colorsList(){return["none","dream","self","friends","family","career"]}colors(t){return qt[t]}createFig(t,e){return new Ut(this,t,e)}cellGenerator(t){return St([1,0,1,1,1,1],this.rni)}init(){this.prota=new Ft,Object.assign(this.prota,{self:30,friends:30,family:30,career:30})}stateExtraFields(){return this.prota}get dreamFrequency(){return 300}}function It(){let t,e={width:40,height:100,seed:1,mode:"monstromino"};if(document.location.hash){let e=new URLSearchParams(document.location.hash.substr(1));t=Object.fromEntries(e.entries())}let s,n=Mt.loadRaw("auto");if(!n)return(s=zt(t||e,"auto")).start(),s;let a=!t||function(t,e){for(let s in t)if(t[s]!=e[s])return!1;return!0}(n.conf,t);return s=zt(t||n.conf,"auto"),a?s.load(n):s.start(),console.log(s),s}function zt(t,e){switch(t.mode){case"rainbow":return new Wt(t,e);case"life":return new Bt(t,e);default:return t.mode="monstromino",new Et(t,e)}}let Kt={what_files:"\n  After each your move game is saved to the AUTO slot. <br/>\n  You can save in new slot, load any save or delete them with X.\n  ",tip_str:"Each attack deals random damage between 0% and 200% of this value (before Defense applied).",tip_vit:"Amount of HP when combat starts.",tip_def:"Damage from each attack is reduced by this.",tip_spd:"Frequency of attacks.",tip_score:"Score is +1 per cleared cell, +100 per dream, -3 per turn",tip_erase:"Delete file",tip_wasted:"After {0} turns since the game start and each {1} turns thereafter one row of board is blocked.<br/>Figures completely in blocked area are wasted and forever lost.",tip_ability:"Not implemented yet",wasted:"WASTED"};function Jt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Yt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Gt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Qt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Xt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Vt(t,e,s){const n=Object.create(t);return n.stat=e[s],n}function Zt(t){var e;return{c(){(e=y("div")).innerHTML='<div>Here you can save in a new slot, load any save or delete them (with X).</div> <div>After each your move game is saved to the AUTO slot.</div> <div>At any moment, you can quick save to a new slot with "Q" button.</div>',P(e,"text-align","center")},m(t,s){p(t,e,s)},d(t){t&&b(e)}}}function te(t){var e,s,n,a,r;return{c(){e=y("tr"),s=y("td"),n=y("b"),a=w(t.whatPage),r=w(" mode"),A(s,"colspan","2"),P(s,"text-align","center"),P(s,"font-weight","normal"),A(s,"class","svelte-23rsga")},m(t,i){p(t,e,i),m(e,s),m(s,n),m(n,a),m(s,r)},p(t,e){t.whatPage&&M(a,e.whatPage)},d(t){t&&b(e)}}}function ee(t){for(var e,s,n,a,r,i,o,l,c,d,h,u,g,f,v,k,_,M,P,O,T,S=t.$game.statsOrder,L=[],C=0;C<S.length;C+=1)L[C]=se(Vt(t,S,C));var N=t.$game.statsOrder,j=[];for(C=0;C<N.length;C+=1)j[C]=ne(Xt(t,N,C));var D=t.$game.statsOrder,E=[];for(C=0;C<D.length;C+=1)E[C]=ae(Qt(t,D,C));return{c(){(e=y("tr")).innerHTML='<td class="svelte-23rsga">Objective</td> <td class="svelte-23rsga">\n\t\t\t        Collect all\n\t\t\t        <span class="shiny-inline"></span>\n\t\t\t        dreams.\n\t\t\t      </td>',s=x(),(n=y("tr")).innerHTML='<td class="svelte-23rsga">Method</td> <td class="svelte-23rsga">\n\t\t\t        Each colored figure is a monster. Mouse over it to see it\'s stats and\n\t\t\t        how would combat go if you attack it. Click to attack. If you win, you\n\t\t\t        will gain some of victim\'s stats, score, and gain access to monsters\n\t\t\t        behind it.\n\t\t\t      </td>',a=x(),(r=y("tr")).innerHTML='<td class="svelte-23rsga">Tips</td> <td class="svelte-23rsga">\n\t\t\t        Figure\'s stats depend on their depth, size, color and neighbors.\n\t\t\t        <br>\n\t\t\t        Mouse over your stats and score at the top for details of what each of\n\t\t\t        them do.\n\t\t\t        <br>\n\t\t\t        Combat is a draw if it\'s not over after 20 attacks\n\t\t\t      </td>',i=x(),o=y("tr"),(l=y("td")).textContent="Legend",c=x(),d=y("td");for(var t=0;t<L.length;t+=1)L[t].c();h=w("\r\n        - You can defeat it.\r\n        "),u=y("br"),g=x();for(t=0;t<j.length;t+=1)j[t].c();f=w("\r\n        - you are too weak for it. Thickness of border is how bad combat with it\r\n        would go.\r\n        "),v=y("br"),k=x();for(t=0;t<E.length;t+=1)E[t].c();_=w("\r\n        - you have not reached it yet.\r\n        "),M=y("br"),P=x(),O=y("span"),T=w("\r\n        - dream. Gives no stats, but a lot of score."),A(l,"class","svelte-23rsga"),A(O,"class","shiny-inline"),A(d,"class","svelte-23rsga")},m(t,b){p(t,e,b),p(t,s,b),p(t,n,b),p(t,a,b),p(t,r,b),p(t,i,b),p(t,o,b),m(o,l),m(o,c),m(o,d);for(var $=0;$<L.length;$+=1)L[$].m(d,null);m(d,h),m(d,u),m(d,g);for($=0;$<j.length;$+=1)j[$].m(d,null);m(d,f),m(d,v),m(d,k);for($=0;$<E.length;$+=1)E[$].m(d,null);m(d,_),m(d,M),m(d,P),m(d,O),m(d,T)},p(t,e){if(t.bg||t.$game){S=e.$game.statsOrder;for(var s=0;s<S.length;s+=1){const n=Vt(e,S,s);L[s]?L[s].p(t,n):(L[s]=se(n),L[s].c(),L[s].m(d,h))}for(;s<L.length;s+=1)L[s].d(1);L.length=S.length}if(t.bg||t.$game){N=e.$game.statsOrder;for(s=0;s<N.length;s+=1){const n=Xt(e,N,s);j[s]?j[s].p(t,n):(j[s]=ne(n),j[s].c(),j[s].m(d,f))}for(;s<j.length;s+=1)j[s].d(1);j.length=N.length}if(t.bg||t.$game){D=e.$game.statsOrder;for(s=0;s<D.length;s+=1){const n=Qt(e,D,s);E[s]?E[s].p(t,n):(E[s]=ae(n),E[s].c(),E[s].m(d,_))}for(;s<E.length;s+=1)E[s].d(1);E.length=D.length}},d(t){t&&(b(e),b(s),b(n),b(a),b(r),b(i),b(o)),$(L,t),$(j,t),$(E,t)}}}function se(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat))},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat))&&A(e,"class",s)},d(t){t&&b(e)}}}function ne(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat)),P(e,"box-shadow","inset 0px 0px 0px 4px rgba(0,0,0,0.3)")},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat))&&A(e,"class",s)},d(t){t&&b(e)}}}function ae(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat)+" darken")},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat)+" darken")&&A(e,"class",s)},d(t){t&&b(e)}}}function re(t){var e,s,n;return{c(){(e=y("tr")).innerHTML='<td class="svelte-23rsga">Objective</td> <td class="svelte-23rsga">\n\t\t\t        Collect all\n\t\t\t        <span class="shiny-inline"></span>\n\t\t\t        dreams.\n\t\t\t      </td>',s=x(),(n=y("tr")).innerHTML='<td class="svelte-23rsga">Method</td> <td class="svelte-23rsga">\n\t\t\t        Colors of figure you can collect are rotated in rainbow order\n\t\t\t        (red&gt;yellow&gt;green&gt;blue&gt;violet).\n\t\t\t        <span style="dream">Dream</span>\n\t\t\t        can follow any color and be followed by any color.\n\t\t\t      </td>'},m(t,a){p(t,e,a),p(t,s,a),p(t,n,a)},d(t){t&&(b(e),b(s),b(n))}}}function ie(t){for(var e,s,n,a,r,i,o,l,c,d,h,u,g,f,v,k,_,M,O,T,S,L,C,N,j,D,E,H,W,F,R,U,q,B,I,z,K,J,Y,G,Q,X,V,Z=t.$game.statsOrder,tt=[],et=0;et<Z.length;et+=1)tt[et]=oe(Gt(t,Z,et));var st=t.$game.statsOrder,nt=[];for(et=0;et<st.length;et+=1)nt[et]=le(Yt(t,st,et));var at=t.$game.statsOrder,rt=[];for(et=0;et<at.length;et+=1)rt[et]=ce(Jt(t,at,et));return{c(){(e=y("tr")).innerHTML='<td class="svelte-23rsga">Objective</td> <td class="svelte-23rsga">\n\t\t\t        Reach your\n\t\t\t        <span class="shiny-inline"></span>\n\t\t\t        dreams and get maximum score.\n\t\t\t      </td>',s=x(),n=y("tr"),(a=y("td")).textContent="Method",r=x(),i=y("td"),o=w("Each colored figure represents some life situation and is relevant to\r\n        one of life aspects -\r\n        "),l=y("span"),c=w("self"),h=w("\r\n        ,\r\n        "),u=y("span"),g=w("friends"),v=w("\r\n        ,\r\n        "),k=y("span"),_=w("family"),O=w("\r\n        or\r\n        "),T=y("span"),S=w("career"),C=w("\r\n        . Click on it to resolve it and improve relative stat and also open the\r\n        way to figures behind it."),N=x(),(j=y("tr")).innerHTML='<td class="svelte-23rsga">Resolution</td> <td class="svelte-23rsga">\n\t\t\t        Whether situation is resolvable is dependent on your stats. If the sum\n\t\t\t        of your relevant (i.e. same colored) stat and average of all other stats\n\t\t\t        is more or equal than situation difficulty, then it\'s resolvable. Dreams\n\t\t\t        work a bit different - they have separate requirements for all stats and\n\t\t\t        all must be met.\n\t\t\t      </td>',D=x(),E=y("tr"),(H=y("td")).textContent="Legend",W=x(),F=y("td");for(var m=0;m<tt.length;m+=1)tt[m].c();R=w("\r\n        - resolvable situations.\r\n        "),U=y("br"),q=x();for(m=0;m<nt.length;m+=1)nt[m].c();B=w("\r\n        - unresolvable. Thickness of border is how much your stats are\r\n        insufficient.\r\n        "),I=y("br"),z=x();for(m=0;m<rt.length;m+=1)rt[m].c();K=w("\r\n        - unreachable.\r\n        "),J=y("br"),Y=x(),G=y("span"),Q=w("\r\n        - dream. If it has a colored border\r\n        "),X=y("span"),V=w("\r\n        then you are missing that stat (the most)."),A(a,"class","svelte-23rsga"),A(l,"class",d=t.fg("self")),A(u,"class",f=t.fg("friends")),A(k,"class",M=t.fg("family")),A(T,"class",L=t.fg("career")),A(i,"class","svelte-23rsga"),A(H,"class","svelte-23rsga"),A(G,"class","shiny-inline"),A(X,"class","shiny-inline"),P(X,"box-shadow","inset 0px 0px 0px 4px rgba(0,0,255, 1)"),A(F,"class","svelte-23rsga")},m(t,d){p(t,e,d),p(t,s,d),p(t,n,d),m(n,a),m(n,r),m(n,i),m(i,o),m(i,l),m(l,c),m(i,h),m(i,u),m(u,g),m(i,v),m(i,k),m(k,_),m(i,O),m(i,T),m(T,S),m(i,C),p(t,N,d),p(t,j,d),p(t,D,d),p(t,E,d),m(E,H),m(E,W),m(E,F);for(var f=0;f<tt.length;f+=1)tt[f].m(F,null);m(F,R),m(F,U),m(F,q);for(f=0;f<nt.length;f+=1)nt[f].m(F,null);m(F,B),m(F,I),m(F,z);for(f=0;f<rt.length;f+=1)rt[f].m(F,null);m(F,K),m(F,J),m(F,Y),m(F,G),m(F,Q),m(F,X),m(F,V)},p(t,e){if(t.fg&&d!==(d=e.fg("self"))&&A(l,"class",d),t.fg&&f!==(f=e.fg("friends"))&&A(u,"class",f),t.fg&&M!==(M=e.fg("family"))&&A(k,"class",M),t.fg&&L!==(L=e.fg("career"))&&A(T,"class",L),t.bg||t.$game){Z=e.$game.statsOrder;for(var s=0;s<Z.length;s+=1){const n=Gt(e,Z,s);tt[s]?tt[s].p(t,n):(tt[s]=oe(n),tt[s].c(),tt[s].m(F,R))}for(;s<tt.length;s+=1)tt[s].d(1);tt.length=Z.length}if(t.bg||t.$game){st=e.$game.statsOrder;for(s=0;s<st.length;s+=1){const n=Yt(e,st,s);nt[s]?nt[s].p(t,n):(nt[s]=le(n),nt[s].c(),nt[s].m(F,B))}for(;s<nt.length;s+=1)nt[s].d(1);nt.length=st.length}if(t.bg||t.$game){at=e.$game.statsOrder;for(s=0;s<at.length;s+=1){const n=Jt(e,at,s);rt[s]?rt[s].p(t,n):(rt[s]=ce(n),rt[s].c(),rt[s].m(F,K))}for(;s<rt.length;s+=1)rt[s].d(1);rt.length=at.length}},d(t){t&&(b(e),b(s),b(n),b(N),b(j),b(D),b(E)),$(tt,t),$(nt,t),$(rt,t)}}}function oe(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat))},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat))&&A(e,"class",s)},d(t){t&&b(e)}}}function le(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat)),P(e,"box-shadow","inset 0px 0px 0px 4px rgba(0,0,0,0.3)")},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat))&&A(e,"class",s)},d(t){t&&b(e)}}}function ce(t){var e,s;return{c(){A(e=y("span"),"class",s="cell "+t.bg(t.stat)+" darken")},m(t,s){p(t,e,s)},p(t,n){(t.bg||t.$game)&&s!==(s="cell "+n.bg(n.stat)+" darken")&&A(e,"class",s)},d(t){t&&b(e)}}}function de(e){var s,n,a,r,i,o="files"==e.whatPage&&Zt(),l="files"!=e.whatPage&&te(e),c="monstromino"==e.whatPage&&ee(e),d="rainbow"==e.whatPage&&re(),h="life"==e.whatPage&&ie(e);return{c(){o&&o.c(),s=x(),n=y("table"),l&&l.c(),a=x(),c&&c.c(),r=x(),d&&d.c(),i=x(),h&&h.c(),A(n,"class","what")},m(t,e){o&&o.m(t,e),p(t,s,e),p(t,n,e),l&&l.m(n,null),m(n,a),c&&c.m(n,null),m(n,r),d&&d.m(n,null),m(n,i),h&&h.m(n,null)},p(t,e){"files"==e.whatPage?o||((o=Zt()).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),"files"!=e.whatPage?l?l.p(t,e):((l=te(e)).c(),l.m(n,a)):l&&(l.d(1),l=null),"monstromino"==e.whatPage?c?c.p(t,e):((c=ee(e)).c(),c.m(n,r)):c&&(c.d(1),c=null),"rainbow"==e.whatPage?d||((d=re()).c(),d.m(n,i)):d&&(d.d(1),d=null),"life"==e.whatPage?h?h.p(t,e):((h=ie(e)).c(),h.m(n,null)):h&&(h.d(1),h=null)},i:t,o:t,d(t){o&&o.d(t),t&&(b(s),b(n)),l&&l.d(),c&&c.d(),d&&d.d(),h&&h.d()}}}function he(t,e,s){let n;l(t,it,t=>{s("$game",n=t)});let{bg:a,fg:r,dream:i,whatPage:o}=e;return t.$set=(t=>{"bg"in t&&s("bg",a=t.bg),"fg"in t&&s("fg",r=t.fg),"dream"in t&&s("dream",i=t.dream),"whatPage"in t&&s("whatPage",o=t.whatPage)}),t.$$.update=((t={whatPage:1})=>{t.whatPage&&console.log(o)}),{bg:a,fg:r,dream:i,whatPage:o,$game:n}}class ue extends X{constructor(t){super(),Q(this,t,he,de,o,["bg","fg","dream","whatPage"])}}function ge(t,e,s){const n=Object.create(t);return n.save=e[s],n}function fe(t){var e,s,n="auto"==t.save[0]?"AUTO":"";return{c(){e=y("span"),s=w(n)},m(t,n){p(t,e,n),m(e,s)},p(t,e){t.$saves&&n!==(n="auto"==e.save[0]?"AUTO":"")&&M(s,n)},d(t){t&&b(e)}}}function me(t){var e,s,n;function a(...e){return t.click_handler(t,...e)}return{c(){e=y("button"),s=w("X"),A(e,"class","tooltip-bottom savex"),e.dataset.tooltip=Kt.tip_erase,n=_(e,"click",a)},m(t,n){p(t,e,n),m(e,s)},p(e,s){t=s},d(t){t&&b(e),n()}}}function pe(t){var e,s,n,a,r,i,o,l,c="#NEW"==t.save[1]?"Save in a new slot":t.save[1];function d(t){return"auto"!=t.save[0]&&"#NEW"!=t.save[1]?me:fe}var h=d(t),u=h(t);function g(...e){return t.click_handler_1(t,...e)}return{c(){e=y("tr"),s=y("td"),u.c(),n=x(),a=y("td"),r=y("button"),i=w(c),o=x(),A(r,"class","save"),l=_(r,"click",g)},m(t,l){p(t,e,l),m(e,s),u.m(s,null),m(e,n),m(e,a),m(a,r),m(r,i),m(e,o)},p(e,n){h===(h=d(t=n))&&u?u.p(e,t):(u.d(1),(u=h(t))&&(u.c(),u.m(s,null))),e.$saves&&c!==(c="#NEW"==t.save[1]?"Save in a new slot":t.save[1])&&M(i,c)},d(t){t&&b(e),u.d(),l()}}}function be(e){for(var s,n,a=[...e.$saves].sort(ve),r=[],i=0;i<a.length;i+=1)r[i]=pe(ge(e,a,i));return{c(){s=y("div"),n=y("table");for(var t=0;t<r.length;t+=1)r[t].c();A(s,"class","files")},m(t,e){p(t,s,e),m(s,n);for(var a=0;a<r.length;a+=1)r[a].m(n,null)},p(t,e){if(t.$saves||t.lang){a=[...e.$saves].sort(ve);for(var s=0;s<a.length;s+=1){const i=ge(e,a,s);r[s]?r[s].p(t,i):(r[s]=pe(i),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},i:t,o:t,d(t){t&&b(s),$(r,t)}}}function ve(t,e){return Number(t[0].substr(5))<Number(e[0].substr(5))?-1:1}function $e(t,e,s){let n,a;function r(t){gt(`Deleted ${t}`),n.erase(t),yt()}function i(t){gt(`Loaded from ${t}`),n.load(t),goTo(n.conf)}function o(t){t=n.save(t),yt(),gt(`Saved as ${t}`)}return l(t,it,t=>{s("$game",n=t)}),l(t,bt,t=>{s("$saves",a=t)}),yt(),window.onkeydown=(t=>{switch(t.code){case"KeyQ":return void o()}}),{deleteSave:r,loadSave:i,newSave:o,$saves:a,click_handler:function({save:t},e){return r(t[0])},click_handler_1:function({save:t},e){return"#NEW"==t[1]?o(t[0]):i(t[0])}}}class ye extends X{constructor(t){super(),Q(this,t,$e,be,o,[])}}function we(t,e,s){const n=Object.create(t);return n.move=e[s],n}function xe(t,e,s){const n=Object.create(t);return n.field=e[s],n.i=s,n}function ke(t){var e,s,n,a,r,i,o,l,c,d=0==t.i?"":"&nbsp;",h=t.abridgedAnalysis?"":t.field,u=Ct(t.target.battler[t.field]);return{c(){e=y("noscript"),s=y("noscript"),n=x(),a=y("span"),r=w(h),i=x(),o=y("span"),l=w(u),A(a,"class","field-name"),A(o,"class",c=t.fg(t.field))},m(t,c){p(t,e,c),e.insertAdjacentHTML("afterend",d),p(t,s,c),p(t,n,c),p(t,a,c),m(a,r),p(t,i,c),p(t,o,c),m(o,l)},p(t,e){(t.abridgedAnalysis||t.$game)&&h!==(h=e.abridgedAnalysis?"":e.field)&&M(r,h),(t.target||t.$game)&&u!==(u=Ct(e.target.battler[e.field]))&&M(l,u),(t.fg||t.$game)&&c!==(c=e.fg(e.field))&&A(o,"class",c)},d(t){t&&(v(e,s),b(e),b(s),b(n),b(a),b(i),b(o))}}}function _e(t){var e,s,n,a,r,i=t.abridgedAnalysis?"":t.target.xp[0],o=(t.abridgedAnalysis?"":"+")+Ct(t.target.xp[1]);return{c(){e=w(i),s=x(),n=y("span"),a=w(o),A(n,"class",r=t.fg(t.target.xp[0]))},m(t,r){p(t,e,r),p(t,s,r),p(t,n,r),m(n,a)},p(t,s){(t.abridgedAnalysis||t.target)&&i!==(i=s.abridgedAnalysis?"":s.target.xp[0])&&M(e,i),(t.abridgedAnalysis||t.target)&&o!==(o=(s.abridgedAnalysis?"":"+")+Ct(s.target.xp[1]))&&M(a,o),(t.fg||t.target)&&r!==(r=s.fg(s.target.xp[0]))&&A(n,"class",r)},d(t){t&&(b(e),b(s),b(n))}}}function Ae(t){var e,s,n,a,r,i,o,l,c,d,h,u,g,f,v=t.move.a.isProto?"Made":"Took",$=Ct(t.move.damageRoll),k=Ct(t.move.def);function _(t){return t.move.damage<=0?Oe:Pe}var P=_(t),O=P(t);return{c(){e=y("div"),s=y("nobr"),n=y("span"),a=w(v),i=x(),o=y("span"),l=w($),d=w("\r\n          -\r\n          "),h=y("span"),u=w(k),f=x(),O.c(),A(n,"class",r=t.move.a.isProto?"attacking":"defending"),A(o,"class",c=t.fg("str")),A(h,"class",g=t.fg("def")),A(e,"class","complete-log")},m(t,r){p(t,e,r),m(e,s),m(s,n),m(n,a),m(s,i),m(s,o),m(o,l),m(s,d),m(s,h),m(h,u),m(s,f),O.m(s,null)},p(t,e){t.target&&v!==(v=e.move.a.isProto?"Made":"Took")&&M(a,v),t.target&&r!==(r=e.move.a.isProto?"attacking":"defending")&&A(n,"class",r),t.target&&$!==($=Ct(e.move.damageRoll))&&M(l,$),t.fg&&c!==(c=e.fg("str"))&&A(o,"class",c),t.target&&k!==(k=Ct(e.move.def))&&M(u,k),t.fg&&g!==(g=e.fg("def"))&&A(h,"class",g),P===(P=_(e))&&O?O.p(t,e):(O.d(1),(O=P(e))&&(O.c(),O.m(s,null)))},d(t){t&&b(e),O.d()}}}function Me(t){var e,s;function n(t){return t.move.damage>0?Se:Te}var a=n(t),r=a(t);return{c(){e=y("span"),r.c(),A(e,"class",s=t.move.a.isProto?"attacking":"defending")},m(t,s){p(t,e,s),r.m(e,null)},p(t,i){a===(a=n(i))&&r?r.p(t,i):(r.d(1),(r=a(i))&&(r.c(),r.m(e,null))),t.target&&s!==(s=i.move.a.isProto?"attacking":"defending")&&A(e,"class",s)},d(t){t&&b(e),r.d()}}}function Pe(t){var e,s,n,a,r,i,o,l,c,d=Ct(t.move.damage),h=Ct(t.move.hp);return{c(){e=w("=\r\n            "),s=y("span"),n=w(d),r=w("\r\n            dmg,\r\n            "),i=y("span"),o=w(h),c=w("\r\n            hp left"),A(s,"class",a=t.fg("str")),A(i,"class",l=t.move.a.isProto?"attacking":"defending")},m(t,a){p(t,e,a),p(t,s,a),m(s,n),p(t,r,a),p(t,i,a),m(i,o),p(t,c,a)},p(t,e){t.target&&d!==(d=Ct(e.move.damage))&&M(n,d),t.fg&&a!==(a=e.fg("str"))&&A(s,"class",a),t.target&&h!==(h=Ct(e.move.hp))&&M(o,h),t.target&&l!==(l=e.move.a.isProto?"attacking":"defending")&&A(i,"class",l)},d(t){t&&(b(e),b(s),b(r),b(i),b(c))}}}function Oe(t){var e,s,n,a;return{c(){e=w("=\r\n            "),s=y("span"),n=w("no damage"),A(s,"class",a=t.fg("def"))},m(t,a){p(t,e,a),p(t,s,a),m(s,n)},p(t,e){t.fg&&a!==(a=e.fg("def"))&&A(s,"class",a)},d(t){t&&(b(e),b(s))}}}function Te(e){var s;return{c(){s=w("=")},m(t,e){p(t,s,e)},p:t,d(t){t&&b(s)}}}function Se(t){var e,s=Ct(t.move.hp);return{c(){e=w(s)},m(t,s){p(t,e,s)},p(t,n){t.target&&s!==(s=Ct(n.move.hp))&&M(e,s)},d(t){t&&b(e)}}}function Le(t){var e,s;function n(t){return t.abridgedAnalysis?Me:Ae}var a=n(t),r=a(t);return{c(){r.c(),e=x(),s=y("span")},m(t,n){r.m(t,n),p(t,e,n),p(t,s,n)},p(t,s){a===(a=n(s))&&r?r.p(t,s):(r.d(1),(r=a(s))&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&(b(e),b(s))}}}function Ce(e){for(var s,n,a,r,i,o,l,c,d,h,u,g,f,v,k,_=e.abridgedAnalysis?"":"score",P=e.target.score,O=e.target.battle.outcome.toUpperCase(),T=e.$game.statsOrder,S=[],L=0;L<T.length;L+=1)S[L]=ke(xe(e,T,L));var C=e.target.xp&&_e(e),N=e.target.battle.log,j=[];for(L=0;L<N.length;L+=1)j[L]=Le(we(e,N,L));return{c(){s=y("div");for(var t=0;t<S.length;t+=1)S[t].c();n=x(),a=y("div"),C&&C.c(),r=x(),i=w(_),o=x(),l=y("span"),c=w("+ "),d=w(P),h=x(),u=y("div");for(t=0;t<j.length;t+=1)j[t].c();g=x(),f=y("span"),v=w(O),A(s,"class","detached-title"),A(l,"class",e.dream),A(a,"class","battle-outcome"),A(f,"class",k="battle-"+e.target.battle.outcome),A(u,"class","combat-log")},m(t,e){p(t,s,e);for(var b=0;b<S.length;b+=1)S[b].m(s,null);p(t,n,e),p(t,a,e),C&&C.m(a,null),m(a,r),m(a,i),m(a,o),m(a,l),m(l,c),m(l,d),p(t,h,e),p(t,u,e);for(b=0;b<j.length;b+=1)j[b].m(u,null);m(u,g),m(u,f),m(f,v)},p(t,e){if(t.fg||t.$game||t.bigNum||t.target||t.abridgedAnalysis){T=e.$game.statsOrder;for(var n=0;n<T.length;n+=1){const a=xe(e,T,n);S[n]?S[n].p(t,a):(S[n]=ke(a),S[n].c(),S[n].m(s,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=T.length}if(e.target.xp?C?C.p(t,e):((C=_e(e)).c(),C.m(a,r)):C&&(C.d(1),C=null),t.abridgedAnalysis&&_!==(_=e.abridgedAnalysis?"":"score")&&M(i,_),t.target&&P!==(P=e.target.score)&&M(d,P),t.dream&&A(l,"class",e.dream),t.abridgedAnalysis||t.target||t.bigNum||t.fg){N=e.target.battle.log;for(n=0;n<N.length;n+=1){const s=we(e,N,n);j[n]?j[n].p(t,s):(j[n]=Le(s),j[n].c(),j[n].m(u,g))}for(;n<j.length;n+=1)j[n].d(1);j.length=N.length}t.target&&O!==(O=e.target.battle.outcome.toUpperCase())&&M(v,O),t.target&&k!==(k="battle-"+e.target.battle.outcome)&&A(f,"class",k)},i:t,o:t,d(t){t&&b(s),$(S,t),t&&(b(n),b(a)),C&&C.d(),t&&(b(h),b(u)),$(j,t)}}}function Ne(t,e,s){let n,a;l(t,ct,t=>{s("$settings",n=t)}),l(t,it,t=>{s("$game",a=t)});let r,{target:i,fg:o,dream:c}=e;return t.$set=(t=>{"target"in t&&s("target",i=t.target),"fg"in t&&s("fg",o=t.fg),"dream"in t&&s("dream",c=t.dream)}),t.$$.update=((t={$settings:1})=>{t.$settings&&s("abridgedAnalysis",r=n.abridgedAnalysis)}),{target:i,fg:o,dream:c,abridgedAnalysis:r,$game:a}}class je extends X{constructor(t){super(),Q(this,t,Ne,Ce,o,["target","fg","dream"])}}function De(t,e,s){const n=Object.create(t);return n.field=e[s],n.i=s,n}function Ee(t){var e,s,n,a,r,i,o,l,c,d=0==t.i?"":"&nbsp;",h=t.abridgedAnalysis?"":t.field,u=Ct(t.target.stats[t.field]);return{c(){e=y("noscript"),s=y("noscript"),n=x(),a=y("span"),r=w(h),i=x(),o=y("span"),l=w(u),A(a,"class","field-name"),A(o,"class",c=t.fg(t.field))},m(t,c){p(t,e,c),e.insertAdjacentHTML("afterend",d),p(t,s,c),p(t,n,c),p(t,a,c),m(a,r),p(t,i,c),p(t,o,c),m(o,l)},p(t,e){(t.abridgedAnalysis||t.target)&&h!==(h=e.abridgedAnalysis?"":e.field)&&M(r,h),t.target&&u!==(u=Ct(e.target.stats[e.field]))&&M(l,u),(t.fg||t.target)&&c!==(c=e.fg(e.field))&&A(o,"class",c)},d(t){t&&(v(e,s),b(e),b(s),b(n),b(a),b(i),b(o))}}}function He(t){var e,s=t.target.stats[t.field]&&Ee(t);return{c(){s&&s.c(),e=k()},m(t,n){s&&s.m(t,n),p(t,e,n)},p(t,n){n.target.stats[n.field]?s?s.p(t,n):((s=Ee(n)).c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){s&&s.d(t),t&&b(e)}}}function We(t){var e,s,n,a=t.target.outcome.toUpperCase();return{c(){e=y("span"),s=w(a),A(e,"class",n="battle-"+t.target.outcome)},m(t,n){p(t,e,n),m(e,s)},p(t,r){t.target&&a!==(a=r.target.outcome.toUpperCase())&&M(s,a),t.target&&n!==(n="battle-"+r.target.outcome)&&A(e,"class",n)},d(t){t&&b(e)}}}function Fe(t){var e,s,n,a,r,i,o,l=t.target.score,c=t.abridgedAnalysis?"":'<span class="field-name">score</span>',d=t.target.xp&&Re(t);return{c(){d&&d.c(),e=x(),s=y("span"),n=w("+ "),a=w(l),r=x(),i=y("noscript"),o=y("noscript"),A(s,"class",t.dream)},m(t,l){d&&d.m(t,l),p(t,e,l),p(t,s,l),m(s,n),m(s,a),p(t,r,l),p(t,i,l),i.insertAdjacentHTML("afterend",c),p(t,o,l)},p(t,n){n.target.xp?d?d.p(t,n):((d=Re(n)).c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null),t.target&&l!==(l=n.target.score)&&M(a,l),t.dream&&A(s,"class",n.dream),t.abridgedAnalysis&&c!==(c=n.abridgedAnalysis?"":'<span class="field-name">score</span>')&&(v(i,o),i.insertAdjacentHTML("afterend",c))},d(t){d&&d.d(t),t&&(b(e),b(s),b(r),v(i,o),b(i),b(o))}}}function Re(t){var e,s,n,a,r,i,o=(t.abridgedAnalysis?"":"+")+Ct(t.target.xp[1]),l=t.abridgedAnalysis?"":t.target.xp[0];return{c(){e=y("span"),s=w(o),a=x(),r=y("span"),i=w(l),A(e,"class",n=t.fg(t.target.xp[0])),A(r,"class","field-name")},m(t,n){p(t,e,n),m(e,s),p(t,a,n),p(t,r,n),m(r,i)},p(t,a){(t.abridgedAnalysis||t.target)&&o!==(o=(a.abridgedAnalysis?"":"+")+Ct(a.target.xp[1]))&&M(s,o),(t.fg||t.target)&&n!==(n=a.fg(a.target.xp[0]))&&A(e,"class",n),(t.abridgedAnalysis||t.target)&&l!==(l=a.abridgedAnalysis?"":a.target.xp[0])&&M(i,l)},d(t){t&&(b(e),b(a),b(r))}}}function Ue(e){for(var s,n,a,r,i,o,l=e.target.game.statsOrder,c=[],d=0;d<l.length;d+=1)c[d]=He(De(e,l,d));var h="possible"!=e.target.outcome&&We(e),u="possible"==e.target.outcome&&Fe(e);return{c(){s=y("div");for(var t=0;t<c.length;t+=1)c[t].c();n=x(),a=y("div"),h&&h.c(),r=x(),u&&u.c(),i=x(),o=y("div"),A(s,"class","detached-title"),A(a,"class","battle-outcome"),A(o,"class","combat-log")},m(t,l){p(t,s,l);for(var d=0;d<c.length;d+=1)c[d].m(s,null);p(t,n,l),p(t,a,l),h&&h.m(a,null),m(a,r),u&&u.m(a,null),p(t,i,l),p(t,o,l),o.innerHTML=e.combatLog},p(t,e){if(t.target||t.fg||t.bigNum||t.abridgedAnalysis){l=e.target.game.statsOrder;for(var n=0;n<l.length;n+=1){const a=De(e,l,n);c[n]?c[n].p(t,a):(c[n]=He(a),c[n].c(),c[n].m(s,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}"possible"!=e.target.outcome?h?h.p(t,e):((h=We(e)).c(),h.m(a,r)):h&&(h.d(1),h=null),"possible"==e.target.outcome?u?u.p(t,e):((u=Fe(e)).c(),u.m(a,null)):u&&(u.d(1),u=null),t.combatLog&&(o.innerHTML=e.combatLog)},i:t,o:t,d(t){t&&b(s),$(c,t),t&&(b(n),b(a)),h&&h.d(),u&&u.d(),t&&(b(i),b(o))}}}function qe(t,e,s){let n,a,r;l(t,ct,t=>{s("$settings",n=t)}),l(t,it,t=>{s("$game",a=t)}),l(t,ot,t=>{s("$state",r=t)});let i,o,{target:c,fg:d,dream:h}=e;return t.$set=(t=>{"target"in t&&s("target",c=t.target),"fg"in t&&s("fg",d=t.fg),"dream"in t&&s("dream",h=t.dream)}),t.$$.update=((t={$settings:1,target:1,$game:1,$state:1,fg:1})=>{if(t.$settings&&s("abridgedAnalysis",o=n.abridgedAnalysis),t.target||t.$game||t.$state||t.fg)if(c.dream){let t=[];for(let e of a.statsOrder){let s=r[e]>=c.stats[e],n=`\n        <span class=${d(e)}>${Ct(r[e])}</span>\n        <span class="fg-${s?"green":"red"}">${s?">":"<"}</span>\n        <span class=${d(e)}>${Ct(c.stats[e])}</span>\n        `;t.push(n)}s("combatLog",i=t.join("<br/>"))}else{let t,e=[];for(let s of a.statsOrder){let n=`<span class=${Ct(d(s))}>${Ct(r[s])}</span>`;c.kind==s?t=n:e.push(n)}s("combatLog",i=`\n      (${e.join("+")}) / 3 + ${t} = ${Ct(Ct(a.prota.power(c.kind)))}\n      <span class="fg-${c.possible?"green":"red"}">${c.possible?">":"<"}</span>\n      <span class=${d(c.kind)}>${Ct(c.stats[c.kind])}</span>\n      `)}}),{target:c,fg:d,dream:h,combatLog:i,abridgedAnalysis:o}}class Be extends X{constructor(t){super(),Q(this,t,qe,Ue,o,["target","fg","dream"])}}const{Object:Ie}=z;function ze(t,e,s){const n=Ie.create(t);return n.line=e[s],n.i=s,n}function Ke(t,e,s){const n=Ie.create(t);return n.question=e[s],n}function Je(t,e,s){const n=Ie.create(t);return n.fig=e[s],n.i=s,n}function Ye(t,e,s){const n=Ie.create(t);return n.anim=e[s],n}function Ge(t,e,s){const n=Ie.create(t);return n.field=e[s],n.i=s,n}function Qe(t,e,s){const n=Ie.create(t);return n.stat=e[s],n.i=s,n}function Xe(t){var e,s,n,a,r=[ts,Ze,Ve],i=[];function o(t){return t.target.wasted?0:"monstromino"==t.$game.mode&&t.target.battle?1:"life"==t.$game.mode&&t.target.stats?2:-1}return~(e=o(t))&&(s=i[e]=r[e](t)),{c(){s&&s.c(),n=k()},m(t,s){~e&&i[e].m(t,s),p(t,n,s),a=!0},p(t,a){var l=e;(e=o(a))===l?~e&&i[e].p(t,a):(s&&(U(),I(i[l],1,1,()=>{i[l]=null}),q()),~e?((s=i[e])||(s=i[e]=r[e](a)).c(),B(s,1),s.m(n.parentNode,n)):s=null)},i(t){a||(B(s),a=!0)},o(t){I(s),a=!1},d(t){~e&&i[e].d(t),t&&b(n)}}}function Ve(t){var e,n,a,r=[{target:t.target,fg:t.fg,dream:t.dream}];let i={};for(var o=0;o<r.length;o+=1)i=s(i,r[o]);var l=new Be({props:i});return{c(){e=y("div"),l.$$.fragment.c(),A(e,"style",t.analysisPosition),A(e,"class",n="analysis "+(t.moveTimeout?"":"analysis-shown"))},m(s,n){p(s,e,n),J(l,e,null),t.div_binding_1(e),a=!0},p(t,s){var i=t.target||t.fg||t.dream?K(r,[{target:s.target,fg:s.fg,dream:s.dream}]):{};l.$set(i),a&&!t.analysisPosition||A(e,"style",s.analysisPosition),a&&!t.moveTimeout||n===(n="analysis "+(s.moveTimeout?"":"analysis-shown"))||A(e,"class",n)},i(t){a||(B(l.$$.fragment,t),a=!0)},o(t){I(l.$$.fragment,t),a=!1},d(s){s&&b(e),Y(l),t.div_binding_1(null)}}}function Ze(t){var e,n,a,r=[{target:t.target,fg:t.fg,dream:t.dream}];let i={};for(var o=0;o<r.length;o+=1)i=s(i,r[o]);var l=new je({props:i});return{c(){e=y("div"),l.$$.fragment.c(),A(e,"style",t.analysisPosition),A(e,"class",n="analysis "+(t.moveTimeout?"":"analysis-shown"))},m(s,n){p(s,e,n),J(l,e,null),t.div_binding(e),a=!0},p(t,s){var i=t.target||t.fg||t.dream?K(r,[{target:s.target,fg:s.fg,dream:s.dream}]):{};l.$set(i),a&&!t.analysisPosition||A(e,"style",s.analysisPosition),a&&!t.moveTimeout||n===(n="analysis "+(s.moveTimeout?"":"analysis-shown"))||A(e,"class",n)},i(t){a||(B(l.$$.fragment,t),a=!0)},o(t){I(l.$$.fragment,t),a=!1},d(s){s&&b(e),Y(l),t.div_binding(null)}}}function ts(e){var s,n,a,r,i,o=Kt.wasted,l=Nt(Kt.tip_wasted,e.$game.wastedDelay,e.$game.turnsPerWastedLine);return{c(){s=y("div"),n=y("div"),a=x(),r=y("div"),A(n,"class","detached-title"),A(r,"class","combat-log"),A(s,"style",e.analysisPosition),A(s,"class",i="analysis width-300 "+(e.moveTimeout?"":"analysis-shown"))},m(t,i){p(t,s,i),m(s,n),n.innerHTML=o,m(s,a),m(s,r),r.innerHTML=l,e.div2_binding(s)},p(t,e){t.$game&&l!==(l=Nt(Kt.tip_wasted,e.$game.wastedDelay,e.$game.turnsPerWastedLine))&&(r.innerHTML=l),t.analysisPosition&&A(s,"style",e.analysisPosition),t.moveTimeout&&i!==(i="analysis width-300 "+(e.moveTimeout?"":"analysis-shown"))&&A(s,"class",i)},i:t,o:t,d(t){t&&b(s),e.div2_binding(null)}}}function es(t){var e,s,n,a,r;return{c(){(e=y("button")).textContent="back",s=x(),n=y("div"),a=w(t.page),A(e,"class","hotkey"),A(n,"class","page-title"),r=_(e,"click",t.click_handler_3)},m(t,r){p(t,e,r),p(t,s,r),p(t,n,r),m(n,a)},p(t,e){t.page&&M(a,e.page)},d(t){t&&(b(e),b(s),b(n)),r()}}}function ss(t){for(var e,s,n,a,r,i,o,l=t.$game.statsOrder,c=[],d=0;d<l.length;d+=1)c[d]=ns(Qe(t,l,d));return{c(){(e=y("button")).textContent="undo",s=x(),n=y("div");for(var l=0;l<c.length;l+=1)c[l].c();a=x(),r=y("button"),i=w("ability"),A(e,"class","hotkey"),A(n,"class","stats"),A(r,"class","hotkey wip tooltip-bottom"),r.dataset.tooltip=Kt.tip_ability,o=_(e,"click",t.undo)},m(t,o){p(t,e,o),p(t,s,o),p(t,n,o);for(var l=0;l<c.length;l+=1)c[l].m(n,null);p(t,a,o),p(t,r,o),m(r,i)},p(t,e){if(t.fg||t.$game||t.lang||t.bigNum||t.$state){l=e.$game.statsOrder;for(var s=0;s<l.length;s+=1){const a=Qe(e,l,s);c[s]?c[s].p(t,a):(c[s]=ns(a),c[s].c(),c[s].m(n,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=l.length}},d(t){t&&(b(e),b(s),b(n)),$(c,t),t&&(b(a),b(r)),o()}}}function ns(t){var e,s,n,a,r,i,o,l,c,d,h,u=t.i>0?"&nbsp":"",g=t.stat,f=Ct(t.$state[t.stat]);return{c(){e=y("noscript"),s=y("noscript"),n=x(),a=y("span"),r=w(g),i=x(),o=y("span"),l=w(f),c=x(),A(a,"class","field-name"),A(o,"class",d=t.fg(t.stat)+" tooltip-bottom"),o.dataset.tooltip=h=Kt["tip_"+t.stat]},m(t,d){p(t,e,d),e.insertAdjacentHTML("afterend",u),p(t,s,d),p(t,n,d),p(t,a,d),m(a,r),p(t,i,d),p(t,o,d),m(o,l),m(o,c)},p(t,e){t.$game&&g!==(g=e.stat)&&M(r,g),(t.$state||t.$game)&&f!==(f=Ct(e.$state[e.stat]))&&M(l,f),t.$game&&d!==(d=e.fg(e.stat)+" tooltip-bottom")&&A(o,"class",d),t.$game&&h!==(h=Kt["tip_"+e.stat])&&(o.dataset.tooltip=h)},d(t){t&&(v(e,s),b(e),b(s),b(n),b(a),b(i),b(o))}}}function as(t){var e,s,n,a,r,i,o,l,c,d,h=Ct(t.$state.score),u=t.Math.round(t.$state.turns),g=t.$conf.goal&&rs(t);return{c(){(e=y("span")).textContent="score",s=x(),n=y("span"),a=w(h),r=x(),g&&g.c(),i=x(),(o=y("span")).textContent="turns",l=x(),c=y("span"),d=w(u),A(e,"class","field-name"),A(n,"class",t.dream+" tooltip-bottom"),n.dataset.tooltip=Kt.tip_score,A(o,"class","field-name")},m(t,h){p(t,e,h),p(t,s,h),p(t,n,h),m(n,a),p(t,r,h),g&&g.m(t,h),p(t,i,h),p(t,o,h),p(t,l,h),p(t,c,h),m(c,d)},p(t,e){t.$state&&h!==(h=Ct(e.$state.score))&&M(a,h),e.$conf.goal?g?g.p(t,e):((g=rs(e)).c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),t.$state&&u!==(u=e.Math.round(e.$state.turns))&&M(d,u)},d(t){t&&(b(e),b(s),b(n),b(r)),g&&g.d(t),t&&(b(i),b(o),b(l),b(c))}}}function rs(t){var e,s,n,a=t.$conf.goal;return{c(){e=y("span"),s=w("/"),n=w(a),A(e,"class","field-name "+t.dream)},m(t,a){p(t,e,a),m(e,s),m(e,n)},p(t,e){t.$conf&&a!==(a=e.$conf.goal)&&M(n,a)},d(t){t&&b(e)}}}function is(t){var e;return{c(){e=w("")},m(t,s){p(t,e,s)},d(t){t&&b(e)}}}function os(t){var e,s,n,a,r,i,o=Ct(t.$debrief[t.field]),l=t.field,c=t.i>0&&is();return{c(){c&&c.c(),e=w("\r\n      + "),s=w(o),n=x(),a=y("span"),r=w(l),A(a,"class",i=t.fg(t.field))},m(t,i){c&&c.m(t,i),p(t,e,i),p(t,s,i),p(t,n,i),p(t,a,i),m(a,r)},p(t,n){n.i>0?c||((c=is()).c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),(t.$debrief||t.$game)&&o!==(o=Ct(n.$debrief[n.field]))&&M(s,o),t.$game&&l!==(l=n.field)&&M(r,l),t.$game&&i!==(i=n.fg(n.field))&&A(a,"class",i)},d(t){c&&c.d(t),t&&(b(e),b(s),b(n),b(a))}}}function ls(t){for(var e,s,n,a,i,o,l,c,d,h,u,g,f,v,k,T,S,L,C,N,j,D=t.Math.floor(t.$state.turnsToWaste),H=t.particles,W=[],F=0;F<H.length;F+=1)W[F]=cs(Ye(t,H,F));var R=t.$board,U=[];for(F=0;F<R.length;F+=1)U[F]=ds(Je(t,R,F));var q=["monstromino","rainbow","life"],B=[];for(F=0;F<3;F+=1)B[F]=hs(Ke(t,q,F));return{c(){e=y("div"),s=y("div"),n=w(D),a=x(),(i=y("span")).textContent="turns",o=x(),l=y("div");for(var r=0;r<W.length;r+=1)W[r].c();c=x();for(r=0;r<U.length;r+=1)U[r].c();d=x(),h=y("div"),u=w("Mode\r\n      "),g=y("select");for(r=0;r<3;r+=1)B[r].c();f=w("\r\n      Seed\r\n      "),v=y("input"),k=w("\r\n      Width\r\n      "),T=y("input"),S=w("\r\n      Height\r\n      "),L=y("input"),C=w("\r\n      \r\n      "),(N=y("button")).textContent="play",A(i,"class","field-name"),A(s,"class","waste-line"),P(s,"width",20*t.$conf.width+100+"px"),P(s,"transform","translateY("+20*t.$state.wasteDepth+"px)"),A(l,"class","animations"),A(e,"class","board-table"),P(e,"width",20*t.$conf.width+"px"),void 0===t.custom.mode&&E(()=>t.select_change_handler.call(g)),A(h,"class","board-conf"),j=[_(e,"mousemove",t.hoverCell),_(e,"mousedown",t.clickCell),_(e,"mouseleave",t.unHoverCell),_(g,"change",t.select_change_handler),_(v,"input",t.input0_input_handler),_(T,"input",t.input1_input_handler),_(L,"input",t.input2_input_handler),_(N,"click",t.playCustom)]},m(r,b){p(r,e,b),m(e,s),m(s,n),m(s,a),m(s,i),m(e,o),m(e,l);for(var $=0;$<W.length;$+=1)W[$].m(l,null);m(e,c);for($=0;$<U.length;$+=1)U[$].m(e,null);p(r,d,b),p(r,h,b),m(h,u),m(h,g);for($=0;$<3;$+=1)B[$].m(g,null);O(g,t.custom.mode),m(h,f),m(h,v),v.value=t.custom.seed,m(h,k),m(h,T),T.value=t.custom.width,m(h,S),m(h,L),L.value=t.custom.height,m(h,C),m(h,N)},p(t,a){if(t.$state&&D!==(D=a.Math.floor(a.$state.turnsToWaste))&&M(n,D),t.$conf&&P(s,"width",20*a.$conf.width+100+"px"),t.$state&&P(s,"transform","translateY("+20*a.$state.wasteDepth+"px)"),t.particles){H=a.particles;for(var r=0;r<H.length;r+=1){const e=Ye(a,H,r);W[r]?W[r].p(t,e):(W[r]=cs(e),W[r].c(),W[r].m(l,null))}for(;r<W.length;r+=1)W[r].d(1);W.length=H.length}if(t.cellClasses||t.$board||t.target||t.cellStyle){R=a.$board;for(r=0;r<R.length;r+=1){const s=Je(a,R,r);U[r]?U[r].p(t,s):(U[r]=ds(s),U[r].c(),U[r].m(e,null))}for(;r<U.length;r+=1)U[r].d(1);U.length=R.length}t.$conf&&P(e,"width",20*a.$conf.width+"px"),t.custom&&O(g,a.custom.mode),t.custom&&v.value!==a.custom.seed&&(v.value=a.custom.seed),t.custom&&T.value!==a.custom.width&&(T.value=a.custom.width),t.custom&&L.value!==a.custom.height&&(L.value=a.custom.height)},d(t){t&&b(e),$(W,t),$(U,t),t&&(b(d),b(h)),$(B,t),r(j)}}}function cs(t){var e,s,n,a,r,i,o=t.anim.content||"";return{c(){e=y("div"),s=w(o),n=x(),A(e,"class",a=t.anim.class||"death"),A(e,"style",r=t.anim.style||"")},m(a,r){p(a,e,r),m(e,s),m(e,n),i=function(t,e){let s=e.content?-40:-70,n=e.content?-20:0,a=e.content?1500:200;t.animate([{opacity:1,display:"block",transform:`translate(0px,${n}px) rotate3d(1, 0, 0, 0deg)`},{opacity:0,display:"none",transform:`translate(${60*Math.random()-30}px, ${s}px) rotate3d(${180*Math.random()-90}, ${180*Math.random()-90}, ${180*Math.random()-90}, ${180*Math.random()-90}deg)`}],{duration:a,easing:"ease-out",fill:"forwards"})}.call(null,e,t.anim)||{}},p(n,l){t=l,n.particles&&o!==(o=t.anim.content||"")&&M(s,o),n.particles&&a!==(a=t.anim.class||"death")&&A(e,"class",a),n.particles&&r!==(r=t.anim.style||"")&&A(e,"style",r),"function"==typeof i.update&&n.particles&&i.update.call(null,t.anim)},d(t){t&&b(e),i&&"function"==typeof i.destroy&&i.destroy()}}}function ds(t){var e,s,n;return{c(){A(e=y("div"),"id",t.i),A(e,"class",s="cell "+t.cellClasses(t.fig)+"\r\n          "+(t.fig.possible&&!t.fig.wasted&&t.fig==t.target?"aimed":"")+"\r\n          "+(!t.fig.dream||t.fig.resolved||t.fig.wasted?"":"shiny")),A(e,"style",n=t.cellStyle(t.fig))},m(t,s){p(t,e,s)},p(t,a){(t.$board||t.target)&&s!==(s="cell "+a.cellClasses(a.fig)+"\r\n          "+(a.fig.possible&&!a.fig.wasted&&a.fig==a.target?"aimed":"")+"\r\n          "+(!a.fig.dream||a.fig.resolved||a.fig.wasted?"":"shiny"))&&A(e,"class",s),t.$board&&n!==(n=a.cellStyle(a.fig))&&A(e,"style",n)},d(t){t&&b(e)}}}function hs(e){var s,n;return{c(){s=y("option"),n=w(e.question),s.__value=e.question,s.value=s.__value},m(t,e){p(t,s,e),m(s,n)},p:t,d(t){t&&b(s)}}}function us(t){var e,s=new ye({});return{c(){s.$$.fragment.c()},m(t,n){J(s,t,n),e=!0},i(t){e||(B(s.$$.fragment,t),e=!0)},o(t){I(s.$$.fragment,t),e=!1},d(t){Y(s,t)}}}function gs(t){var e,s,n,a,i,o,l,c,d;return{c(){e=y("div"),s=y("label"),n=y("input"),a=w("\r\n        Sound"),i=x(),o=y("label"),l=y("input"),c=w("\r\n        Shortened combat analysis"),A(n,"type","checkbox"),A(l,"type","checkbox"),A(e,"class","settings"),d=[_(n,"change",t.input0_change_handler),_(l,"change",t.input1_change_handler)]},m(r,d){p(r,e,d),m(e,s),m(s,n),n.checked=t.$settings.sound,m(s,a),m(e,i),m(e,o),m(o,l),l.checked=t.$settings.abridgedAnalysis,m(o,c)},p(t,e){t.$settings&&(n.checked=e.$settings.sound),t.$settings&&(l.checked=e.$settings.abridgedAnalysis)},d(t){t&&b(e),r(d)}}}function fs(t){var e,s,n=t.line;return{c(){e=y("div"),s=w(n)},m(t,n){p(t,e,n),m(e,s)},p(t,e){t.$logs&&n!==(n=e.line)&&M(s,n)},d(t){t&&b(e)}}}function ms(t){var e,n,a,i,o,l,c,d,h,u,g,f,v,k,O,T,S,C,j,D,E,H,W,F,R,z,G,Q,X,V,Z,tt,et,st,nt,at,rt,it,ot,lt,ct,dt,ht,ut,gt,ft,mt,pt,bt,vt,$t,yt,wt,xt,kt,_t,At,Mt,Pt,Ot,Tt,St,Lt,Ct,Nt,jt,Dt,Et,Ht,Wt,Ft,Rt,Ut,qt,Bt,It,zt,Kt,Jt=t.$state.complete?t.$state.haveMoves?"Board clear":"You have failed at life":"",Yt=t.$debrief.score,Gt=t.$debrief.dreamsResolved,Qt=t.$debrief.turns,Xt=t.$debrief.challengeUrl,Vt=t.target&&Xe(t);function Zt(t){return"board"==t.page?ss:es}var te=Zt(t),ee=te(t),se="board"==t.page&&as(t),ne=[{fg:t.fg,bg:t.bg,dream:t.dream}];function ae(e){var s;t.what_1_whatPage_binding.call(null,e),E=!0,s=(()=>E=!1),N.push(s)}let re={};for(var ie=0;ie<ne.length;ie+=1)re=s(re,ne[ie]);void 0!==t.whatPage&&(re.whatPage=t.whatPage);var oe=new ue({props:re});L.push(()=>(function(t,e,s){-1!==t.$$.props.indexOf(e)&&(t.$$.bound[e]=s,s(t.$$.ctx[e]))})(oe,"whatPage",ae));var le=t.$game.colorsList.slice(2),ce=[];for(ie=0;ie<le.length;ie+=1)ce[ie]=os(Ge(t,le,ie));var de="board"==t.page&&ls(t),he="files"==t.page&&us(),ge="settings"==t.page&&gs(t),fe=t.$logs,me=[];for(ie=0;ie<fe.length;ie+=1)me[ie]=fs(ze(t,fe,ie));return{c(){Vt&&Vt.c(),e=x(),n=y("div"),a=y("div"),(i=y("button")).textContent="menu",o=x(),l=y("div"),(c=y("button")).textContent="Board",d=x(),(h=y("button")).textContent="Files",u=x(),(g=y("button")).textContent="Settings",f=x(),v=y("div"),k=x(),ee.c(),O=x(),T=y("div"),S=x(),C=y("div"),se&&se.c(),j=x(),D=y("div"),oe.$$.fragment.c(),H=x(),W=y("div"),F=x(),(R=y("button")).textContent="Ok, got it",G=x(),Q=y("div"),X=y("div"),V=w(Jt),Z=x(),tt=y("div"),et=y("big"),st=w("Score:\r\n      "),nt=y("span"),at=w(Yt),rt=w("\r\n    =\r\n    "),it=y("br"),ot=x(),lt=w(Gt),ct=x(),dt=y("span"),ht=w("dream"),ut=w("\r\n    * 100\r\n    ");for(var s=0;s<ce.length;s+=1)ce[s].c();gt=w("\r\n    - "),ft=w(Qt),mt=w(" turns * 3\r\n    "),pt=y("br"),bt=x(),vt=y("br"),$t=x(),(yt=y("small")).innerHTML="\n\t\t\t      Challenge url - you can share it with someone who wants to try and beat\n\t\t\t      your record on this board:\n\t\t\t      <br>",wt=x(),xt=y("u"),kt=y("a"),_t=w(Xt),Mt=x(),Pt=y("br"),Ot=x(),Tt=y("br"),St=x(),Lt=y("div"),(Ct=y("button")).textContent="Undo",Nt=x(),(jt=y("span")).textContent="Or use the form at the bottom for another board/mode.",Et=x(),Ht=y("div"),de&&de.c(),Wt=x(),he&&he.c(),Ft=x(),ge&&ge.c(),Rt=x(),Ut=y("div"),(qt=y("button")).textContent="Help",Bt=x(),It=y("div");for(s=0;s<me.length;s+=1)me[s].c();A(l,"class","dropdown"),A(a,"class","menu"),A(v,"class","spacer"),A(T,"class","spacer"),A(C,"class","turns"),A(n,"class","header"),A(D,"class",z="bottom panel card "+(t.$what?"":"panel-hidden-s")),A(X,"class","detached-title card large-font"),P(X,"padding","5px"),A(nt,"class",t.dream),A(dt,"class",t.dream),A(kt,"href",At=t.$debrief.challengeUrl),P(jt,"margin","0px 10px"),A(Lt,"class","buttons-horizontal"),A(tt,"class","card wide-lines"),A(Q,"class",Dt="center panel "+(t.$state.complete&&"board"==t.page?"":"panel-hidden")),A(Ht,"class","main"),A(qt,"class","important"),A(Ut,"class","se-corner"),A(It,"class","log"),Kt=[_(c,"click",t.click_handler),_(h,"click",t.click_handler_1),_(g,"click",t.click_handler_2),_(R,"click",t.click_handler_4),_(Ct,"click",t.undo),_(qt,"click",t.toggleWhat)]},m(s,r){Vt&&Vt.m(s,r),p(s,e,r),p(s,n,r),m(n,a),m(a,i),m(a,o),m(a,l),m(l,c),m(l,d),m(l,h),m(l,u),m(l,g),m(n,f),m(n,v),m(n,k),ee.m(n,null),m(n,O),m(n,T),m(n,S),m(n,C),se&&se.m(C,null),p(s,j,r),p(s,D,r),J(oe,D,null),m(D,H),m(D,W),m(D,F),m(D,R),p(s,G,r),p(s,Q,r),m(Q,X),m(X,V),m(Q,Z),m(Q,tt),m(tt,et),m(et,st),m(et,nt),m(nt,at),m(tt,rt),m(tt,it),m(tt,ot),m(tt,lt),m(tt,ct),m(tt,dt),m(dt,ht),m(tt,ut);for(var b=0;b<ce.length;b+=1)ce[b].m(tt,null);m(tt,gt),m(tt,ft),m(tt,mt),m(tt,pt),m(tt,bt),m(tt,vt),m(tt,$t),m(tt,yt),m(tt,wt),m(tt,xt),m(xt,kt),m(kt,_t),m(tt,Mt),m(tt,Pt),m(tt,Ot),m(tt,Tt),m(tt,St),m(tt,Lt),m(Lt,Ct),m(Lt,Nt),m(Lt,jt),p(s,Et,r),p(s,Ht,r),de&&de.m(Ht,null),m(Ht,Wt),he&&he.m(Ht,null),m(Ht,Ft),ge&&ge.m(Ht,null),p(s,Rt,r),p(s,Ut,r),m(Ut,qt),p(s,Bt,r),p(s,It,r);for(b=0;b<me.length;b+=1)me[b].m(It,null);t.div14_binding(It),zt=!0},p(t,s){s.target?Vt?(Vt.p(t,s),B(Vt,1)):((Vt=Xe(s)).c(),B(Vt,1),Vt.m(e.parentNode,e)):Vt&&(U(),I(Vt,1,1,()=>{Vt=null}),q()),te===(te=Zt(s))&&ee?ee.p(t,s):(ee.d(1),(ee=te(s))&&(ee.c(),ee.m(n,O))),"board"==s.page?se?se.p(t,s):((se=as(s)).c(),se.m(C,null)):se&&(se.d(1),se=null);var a=t.fg||t.bg||t.dream?K(ne,[{fg:s.fg,bg:s.bg,dream:s.dream}]):{};if(!E&&t.whatPage&&(a.whatPage=s.whatPage),oe.$set(a),zt&&!t.$what||z===(z="bottom panel card "+(s.$what?"":"panel-hidden-s"))||A(D,"class",z),zt&&!t.$state||Jt===(Jt=s.$state.complete?s.$state.haveMoves?"Board clear":"You have failed at life":"")||M(V,Jt),zt&&!t.$debrief||Yt===(Yt=s.$debrief.score)||M(at,Yt),zt&&!t.$debrief||Gt===(Gt=s.$debrief.dreamsResolved)||M(lt,Gt),t.fg||t.$game||t.bigNum||t.$debrief){le=s.$game.colorsList.slice(2);for(var r=0;r<le.length;r+=1){const e=Ge(s,le,r);ce[r]?ce[r].p(t,e):(ce[r]=os(e),ce[r].c(),ce[r].m(tt,gt))}for(;r<ce.length;r+=1)ce[r].d(1);ce.length=le.length}if(zt&&!t.$debrief||Qt===(Qt=s.$debrief.turns)||M(ft,Qt),zt&&!t.$debrief||Xt===(Xt=s.$debrief.challengeUrl)||M(_t,Xt),zt&&!t.$debrief||At===(At=s.$debrief.challengeUrl)||A(kt,"href",At),zt&&!t.$state&&!t.page||Dt===(Dt="center panel "+(s.$state.complete&&"board"==s.page?"":"panel-hidden"))||A(Q,"class",Dt),"board"==s.page?de?de.p(t,s):((de=ls(s)).c(),de.m(Ht,Wt)):de&&(de.d(1),de=null),"files"==s.page?he?B(he,1):((he=us()).c(),B(he,1),he.m(Ht,Ft)):he&&(U(),I(he,1,1,()=>{he=null}),q()),"settings"==s.page?ge?ge.p(t,s):((ge=gs(s)).c(),ge.m(Ht,null)):ge&&(ge.d(1),ge=null),t.$logs){fe=s.$logs;for(r=0;r<fe.length;r+=1){const e=ze(s,fe,r);me[r]?me[r].p(t,e):(me[r]=fs(e),me[r].c(),me[r].m(It,null))}for(;r<me.length;r+=1)me[r].d(1);me.length=fe.length}},i(t){zt||(B(Vt),B(oe.$$.fragment,t),B(he),zt=!0)},o(t){I(Vt),I(oe.$$.fragment,t),I(he),zt=!1},d(s){Vt&&Vt.d(s),s&&(b(e),b(n)),ee.d(),se&&se.d(),s&&(b(j),b(D)),Y(oe),s&&(b(G),b(Q)),$(ce,s),s&&(b(Et),b(Ht)),de&&de.d(),he&&he.d(),ge&&ge.d(),s&&(b(Rt),b(Ut),b(Bt),b(It)),$(me,s),t.div14_binding(null),r(Kt)}}}function ps(t){return"#"+("000000"+t.toString(16)).substr(-6)}function bs(t,e,s){let n,a,r,i,o,c,d,h,u;l(t,it,t=>{s("$game",n=t)}),l(t,ut,t=>{s("$helpSeen",a=t)}),l(t,mt,t=>{s("$what",r=t)}),l(t,ht,t=>{s("$logs",i=t)}),l(t,ct,t=>{s("$settings",o=t)}),l(t,ot,t=>{s("$state",c=t)}),l(t,nt,t=>{s("$conf",d=t)}),l(t,at,t=>{s("$debrief",h=t)}),l(t,rt,t=>{s("$board",u=t)});let g,f,m,p,b=[new Audio("paper2.ogg"),new Audio("paper.ogg")],v=new Audio("bell.ogg"),$="board",y=[0,0];mt.subscribe(t=>{if(t){let t=a;t[p]=!0,a=t,ut.set(a)}});let w,x={monstromino:{attackable:"attackable",impossible:"darken"},life:{attackable:"attackable",impossible:"darken"},rainbow:{attackable:"attackable outlined",impossible:"somewhat-darken"}};function k(t){return"fg-"+n.colors(t)}function _(t){return"bg-"+n.colors(t)}let A,M="dream"+(dt?" dream-animation":""),P=dt?" transition":"",O={};nt.subscribe(t=>{Object.assign(O,t),delete O.goal}),ht.subscribe(t=>{console.log(m),console.log(i),m&&m.animate([{opacity:0,display:"none",offset:0},{opacity:1,display:"flex",offset:.1},{opacity:1,display:"flex",offset:.9},{opacity:0,display:"none"}],{duration:5e3,easing:"ease-out",fill:"forwards"})});let T,S="";function C(){n.undo(),D.length=0,s("particles",D)}function N(t){D.length=0,s("particles",D),f=g=null,s("target",g),s("page",$=t)}function j(){r=!r,mt.set(r)}document.onmousemove=(t=>{y=[t.x,t.y];let e=Math.abs(t.movementX)+Math.abs(t.movementY);!function(){let t=n.figAt(f);f=null,!t||t.resolved||t.none?s("target",g=null):(t.updateAnalysis(),s("target",g=t))}(),function(){let[t,e]=y,n=A?A.offsetWidth:400,a=`left: ${t>window.innerWidth-n-70?t-n-50:t+100}px; top: ${Math.min(e,window.innerHeight-(A?A.offsetHeight:50)-50)}px`;s("analysisPosition",S=a)}(),e>4&&(T&&clearTimeout(T),s("moveTimeout",T=setTimeout(t=>{s("moveTimeout",T=null)},1e3)))});let D=[],E=1;document.onkeydown=(t=>{switch(t.code){case"KeyS":return void N("settings"==$?"board":"settings");case"KeyF":return void N("files"==$?"board":"files");case"KeyB":return void N("board");case"KeyH":return void j();case"KeyU":return void C()}});let H={red:[16711680,16711680],orange:[16744448,16744448],yellow:[16768256,16766720],green:[47872,60928],cyan:[48059,65535],blue:[255,3355647],violet:[12255487,12255487],dream:[48059,65535],none:[16777215,16777215]};for(let t in H)H[t]={fg:ps(H[t][0]),bg:ps(H[t][1])};let W=document.createElement("style");return W.type="text/css",document.getElementsByTagName("head")[0].appendChild(W),W.innerHTML=Object.keys(H).map(t=>`\n    .fg-${t} { color: ${H[t].fg}}\n    .bg-${t} { background: ${H[t].bg}}\n    `).join("\n"),t.$$.update=((t={page:1,$game:1,$helpSeen:1,whatPage:1,modes:1})=>{(t.page||t.$game||t.$helpSeen||t.whatPage)&&(s("whatPage",p="files"==$?"files":"board"==$?n.mode:void 0),a[p]||(r=!0,mt.set(r))),(t.modes||t.$game)&&(w=x[n.mode])}),{target:g,page:$,logDiv:m,whatPage:p,fg:k,bg:_,dream:M,custom:O,clickCell:function(t){if(0==t.button)if(t.shiftKey)n.logFigAt(t.target.id);else{let e=n.attackFigAt(t.target.id);if(e){if(o.sound){let t=e.dream?v:b[Math.floor(2*Math.random())];t.playbackRate=(1+1.3*Math.random())*(e.dream?.5:1),t.volume=.5+Math.random()/2,t.play()}!function(t){if(!t)return;let e=t.deathText,a="death "+(e?_(e.class)||e.class:_(t.kind)),r=[];for(let e of t.cells)r.push({style:`left:${e%n.width*20}px;top:${20*Math.floor(e/n.width)}px;`,class:a,id:E++});e&&r.push({style:`left:${t.cells[0]%n.width*20}px;top:${20*Math.floor(t.cells[0]/n.width)}px;`,class:"flying-text "+(k(e.class)||e.class),content:Ct(e.text),id:E++}),s("particles",D=D.length>30?r:D.concat(r))}(e)}}},hoverCell:function(t){f=t.target.id},unHoverCell:function(t){f=g=null,s("target",g)},analysis:A,analysisPosition:S,moveTimeout:T,undo:C,toPage:N,playCustom:function(){var t;n.wipeAuto(),t=O,window.scrollTo(0,0),window.location.hash="#"+new URLSearchParams(t).toString(),It()},toggleWhat:j,cellClasses:function(t){let e=[t.dream?"bg-none":"bg-"+t.color,t.resolved&&!t.dream?"resolved":"",P];return t.wasted?e.push("wasted"):e=e.concat([t.dream&&t.resolved&&dt?"dream-animation":"",1==t.possibility?w.attackable:"",t.dream||t.possibility>0||t.resolved&&t.reached?"":w.impossible]),e=e.filter(t=>""!=t).join(" ")},cellStyle:function(t){if(t.possibility>0&&t.possibility<1){let e=t.dream?H[t.color].bg:"rgba(0,0,0,0.3)";return`box-shadow: inset 0px 0px 0px ${10-8*t.possibility}px ${e};`}return""},particles:D,$game:n,$what:r,$logs:i,$settings:o,Math:Math,$state:c,$conf:d,$debrief:h,$board:u,div2_binding:function(t){L[t?"unshift":"push"](()=>{s("analysis",A=t)})},div_binding:function(t){L[t?"unshift":"push"](()=>{s("analysis",A=t)})},div_binding_1:function(t){L[t?"unshift":"push"](()=>{s("analysis",A=t)})},click_handler:function(t){return N("board")},click_handler_1:function(t){return N("files")},click_handler_2:function(t){return N("settings")},click_handler_3:function(t){return N("board")},what_1_whatPage_binding:function(t){s("whatPage",p=t),s("page",$),s("$game",n),s("$helpSeen",a)},click_handler_4:function(t){const e=r=!1;return mt.set(r),e},select_change_handler:function(){O.mode=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),s("custom",O)},input0_input_handler:function(){O.seed=this.value,s("custom",O)},input1_input_handler:function(){O.width=this.value,s("custom",O)},input2_input_handler:function(){O.height=this.value,s("custom",O)},input0_change_handler:function(){ct.update(t=>(t.sound=this.checked,t))},input1_change_handler:function(){ct.update(t=>(t.abridgedAnalysis=this.checked,t))},div14_binding:function(t){L[t?"unshift":"push"](()=>{s("logDiv",m=t)})}}}class vs extends X{constructor(t){super(),Q(this,t,bs,ms,o,[])}}window.onload=function(){It(),new vs({target:document.body})}}();
